<mxfile host="app.diagrams.net" agent="Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/132.0.0.0 Safari/537.36" version="26.0.11">
  <diagram name="high-level" id="A-T3FALHQHnoEPlZ2RTH">
    <mxGraphModel dx="2625" dy="1305" grid="1" gridSize="10" guides="1" tooltips="1" connect="1" arrows="1" fold="1" page="1" pageScale="1" pageWidth="850" pageHeight="1100" math="0" shadow="0">
      <root>
        <mxCell id="0" />
        <mxCell id="1" parent="0" />
        <mxCell id="afeIu968NGdjf6M2ejIc-33" value="opt" style="shape=umlFrame;whiteSpace=wrap;html=1;pointerEvents=0;width=40;height=30;" vertex="1" parent="1">
          <mxGeometry x="1460" y="560" width="770" height="250" as="geometry" />
        </mxCell>
        <mxCell id="Qnf2eaOjIHQVNr2A7_gB-13" value="" style="group" vertex="1" connectable="0" parent="1">
          <mxGeometry x="850" y="150" width="480" height="170" as="geometry" />
        </mxCell>
        <mxCell id="Qnf2eaOjIHQVNr2A7_gB-11" value="" style="whiteSpace=wrap;html=1;fontSize=11;" vertex="1" parent="Qnf2eaOjIHQVNr2A7_gB-13">
          <mxGeometry width="480" height="170" as="geometry" />
        </mxCell>
        <mxCell id="Qnf2eaOjIHQVNr2A7_gB-8" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;exitX=1;exitY=0.5;exitDx=0;exitDy=0;entryX=0;entryY=0.5;entryDx=0;entryDy=0;" edge="1" parent="Qnf2eaOjIHQVNr2A7_gB-13" source="Qnf2eaOjIHQVNr2A7_gB-4" target="Qnf2eaOjIHQVNr2A7_gB-5">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="Qnf2eaOjIHQVNr2A7_gB-4" value="user interface&lt;div&gt;nextjs, typescript&lt;/div&gt;" style="rounded=0;whiteSpace=wrap;html=1;" vertex="1" parent="Qnf2eaOjIHQVNr2A7_gB-13">
          <mxGeometry x="10" y="63" width="120" height="60" as="geometry" />
        </mxCell>
        <mxCell id="Qnf2eaOjIHQVNr2A7_gB-9" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;exitX=1;exitY=0.5;exitDx=0;exitDy=0;" edge="1" parent="Qnf2eaOjIHQVNr2A7_gB-13" source="Qnf2eaOjIHQVNr2A7_gB-5" target="Qnf2eaOjIHQVNr2A7_gB-6">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="Qnf2eaOjIHQVNr2A7_gB-5" value="backend api server&lt;div&gt;expressjs, typescript&lt;/div&gt;" style="rounded=0;whiteSpace=wrap;html=1;" vertex="1" parent="Qnf2eaOjIHQVNr2A7_gB-13">
          <mxGeometry x="180" y="63" width="120" height="60" as="geometry" />
        </mxCell>
        <mxCell id="Qnf2eaOjIHQVNr2A7_gB-6" value="mongoDb db" style="dashed=0;outlineConnect=0;html=1;align=center;labelPosition=center;verticalLabelPosition=bottom;verticalAlign=top;shape=mxgraph.weblogos.mongodb" vertex="1" parent="Qnf2eaOjIHQVNr2A7_gB-13">
          <mxGeometry x="380" y="50" width="41.2" height="86.2" as="geometry" />
        </mxCell>
        <mxCell id="Qnf2eaOjIHQVNr2A7_gB-10" value="&lt;font style=&quot;font-size: 16px;&quot;&gt;&lt;b&gt;High level design (components)&lt;/b&gt;&lt;/font&gt;" style="text;html=1;align=center;verticalAlign=middle;resizable=0;points=[];autosize=1;strokeColor=none;fillColor=none;" vertex="1" parent="Qnf2eaOjIHQVNr2A7_gB-13">
          <mxGeometry y="10" width="270" height="30" as="geometry" />
        </mxCell>
        <mxCell id="Qnf2eaOjIHQVNr2A7_gB-14" value="" style="group" vertex="1" connectable="0" parent="1">
          <mxGeometry x="50" y="350" width="640" height="950" as="geometry" />
        </mxCell>
        <mxCell id="Qnf2eaOjIHQVNr2A7_gB-2" value="" style="whiteSpace=wrap;html=1;fontSize=11;" vertex="1" parent="Qnf2eaOjIHQVNr2A7_gB-14">
          <mxGeometry width="640" height="950" as="geometry" />
        </mxCell>
        <mxCell id="4O8g2oR4PRuLh8lg2v8v-23" value="&lt;div&gt;&lt;span style=&quot;font-size: 16px;&quot;&gt;&lt;b&gt;Transactions&lt;/b&gt;&lt;/span&gt;&lt;/div&gt;&lt;font style=&quot;font-size: 16px;&quot;&gt;&lt;b&gt;/transactions&lt;/b&gt;&lt;/font&gt;&lt;div&gt;&lt;br&gt;&lt;/div&gt;&lt;div&gt;create a new transaction&lt;/div&gt;&lt;div&gt;private (user)&lt;/div&gt;&lt;div&gt;/(user, promoCode, service, subscription)&lt;/div&gt;&lt;div&gt;POST&lt;/div&gt;&lt;div&gt;response: 307 redirect(paymentGateway)&lt;/div&gt;&lt;div&gt;&lt;br&gt;&lt;/div&gt;&lt;div&gt;get transactions for user&lt;/div&gt;&lt;div&gt;private (user)&lt;/div&gt;&lt;div&gt;/&lt;/div&gt;&lt;div&gt;GET&lt;/div&gt;&lt;div&gt;response: 200 ok [TransactionBrief]&lt;/div&gt;&lt;div&gt;&lt;br&gt;&lt;/div&gt;&lt;div&gt;get transaction&lt;/div&gt;&lt;div&gt;private (user)&lt;/div&gt;&lt;div&gt;/:id&lt;/div&gt;&lt;div&gt;GET&lt;/div&gt;&lt;div&gt;response 200 ok Transaction&lt;/div&gt;&lt;div&gt;&lt;br&gt;&lt;/div&gt;&lt;div&gt;complete transaction&lt;/div&gt;&lt;div&gt;private (user)&lt;/div&gt;&lt;div&gt;/complete&lt;/div&gt;&lt;div&gt;POST&lt;/div&gt;&lt;div&gt;response: 307 redirect(service dashboard)&lt;/div&gt;" style="text;html=1;align=left;verticalAlign=middle;resizable=0;points=[];autosize=1;strokeColor=none;fillColor=none;" parent="Qnf2eaOjIHQVNr2A7_gB-14" vertex="1">
          <mxGeometry x="30" y="70" width="250" height="400" as="geometry" />
        </mxCell>
        <mxCell id="4O8g2oR4PRuLh8lg2v8v-24" value="&lt;div&gt;&lt;span style=&quot;font-size: 16px;&quot;&gt;&lt;b&gt;subscriptions&lt;/b&gt;&lt;/span&gt;&lt;/div&gt;&lt;div&gt;&lt;span style=&quot;font-size: 16px;&quot;&gt;&lt;b&gt;/subscriptions&lt;/b&gt;&lt;/span&gt;&lt;/div&gt;&lt;div&gt;&lt;br&gt;&lt;/div&gt;&lt;div&gt;get subscriptions done by user&lt;/div&gt;&lt;div&gt;private (user)&lt;/div&gt;&lt;div&gt;&lt;span style=&quot;background-color: transparent; color: light-dark(rgb(0, 0, 0), rgb(255, 255, 255));&quot;&gt;/&lt;/span&gt;&lt;/div&gt;&lt;div&gt;&lt;span style=&quot;background-color: transparent; color: light-dark(rgb(0, 0, 0), rgb(255, 255, 255));&quot;&gt;GET&lt;/span&gt;&lt;/div&gt;&lt;div&gt;response: 200 ok [SubscriptionBrief]&lt;/div&gt;&lt;div&gt;&lt;br&gt;&lt;/div&gt;&lt;div&gt;get subscription details&lt;/div&gt;&lt;div&gt;private (user)&lt;/div&gt;&lt;div&gt;/:id&lt;/div&gt;&lt;div&gt;GET&lt;/div&gt;&lt;div&gt;response: 200 ok Subscription&lt;/div&gt;&lt;div&gt;&lt;br&gt;&lt;/div&gt;&lt;div&gt;modify the subscription&lt;/div&gt;&lt;div&gt;private (user)&lt;/div&gt;&lt;div&gt;/&lt;/div&gt;&lt;div&gt;PUT&lt;/div&gt;&lt;div&gt;response: 200 ok&lt;/div&gt;&lt;div&gt;&lt;br&gt;&lt;/div&gt;&lt;div&gt;get the subscription status of user&amp;nbsp;&lt;/div&gt;&lt;div&gt;by service&lt;/div&gt;&lt;div&gt;private (pam apps)&lt;/div&gt;&lt;div&gt;/service(userId, serviceId)&lt;/div&gt;&lt;div&gt;GET&lt;/div&gt;&lt;div&gt;response: 200 ok active | expired&lt;/div&gt;" style="text;html=1;align=left;verticalAlign=middle;resizable=0;points=[];autosize=1;strokeColor=none;fillColor=none;" parent="Qnf2eaOjIHQVNr2A7_gB-14" vertex="1">
          <mxGeometry x="30" y="530" width="220" height="410" as="geometry" />
        </mxCell>
        <mxCell id="4O8g2oR4PRuLh8lg2v8v-25" value="&lt;div&gt;&lt;b style=&quot;font-size: 16px; background-color: transparent; color: light-dark(rgb(0, 0, 0), rgb(255, 255, 255));&quot;&gt;user&lt;/b&gt;&lt;/div&gt;&lt;div&gt;&lt;b style=&quot;font-size: 16px; background-color: transparent; color: light-dark(rgb(0, 0, 0), rgb(255, 255, 255));&quot;&gt;/user&lt;/b&gt;&lt;/div&gt;&lt;div&gt;&lt;br&gt;&lt;/div&gt;&lt;div&gt;login user&lt;/div&gt;&lt;div&gt;public&lt;/div&gt;&lt;div&gt;&lt;span style=&quot;background-color: transparent; color: light-dark(rgb(0, 0, 0), rgb(255, 255, 255));&quot;&gt;/login&lt;/span&gt;&lt;/div&gt;&lt;div&gt;POST&lt;/div&gt;&lt;div&gt;response: 200 ok {accessToken, refreshToken}&lt;/div&gt;&lt;div&gt;&lt;br&gt;&lt;/div&gt;&lt;div&gt;signup user&lt;/div&gt;&lt;div&gt;public&lt;/div&gt;&lt;div&gt;/signup&lt;/div&gt;&lt;div&gt;POST&lt;/div&gt;&lt;div&gt;response: 200 ok {accessToken, refreshToken}&lt;/div&gt;&lt;div&gt;&lt;br&gt;&lt;/div&gt;&lt;div&gt;get current user data&lt;/div&gt;&lt;div&gt;private (user)&lt;/div&gt;&lt;div&gt;/&lt;/div&gt;&lt;div&gt;GET&lt;/div&gt;&lt;div&gt;response: 200 ok {userData}&lt;/div&gt;&lt;div&gt;&lt;br&gt;&lt;/div&gt;&lt;div&gt;modify current user data&lt;/div&gt;&lt;div&gt;private (user)&lt;/div&gt;&lt;div&gt;/&lt;/div&gt;&lt;div&gt;PUT&lt;/div&gt;&lt;div&gt;response: 200 ok&amp;nbsp;&lt;/div&gt;&lt;div&gt;&lt;br&gt;&lt;/div&gt;&lt;div&gt;reset password&lt;/div&gt;&lt;div&gt;private (user)&lt;/div&gt;&lt;div&gt;/resetpass&lt;/div&gt;&lt;div&gt;POST&lt;/div&gt;&lt;div&gt;response: 200 ok&lt;/div&gt;&lt;div&gt;&lt;br&gt;&lt;/div&gt;&lt;div&gt;get a new refreshToken&lt;/div&gt;&lt;div&gt;private (user)&lt;/div&gt;&lt;div&gt;/refresh(refreshToken)&lt;/div&gt;&lt;div&gt;GET&lt;/div&gt;&lt;div&gt;response: 200 ok {refreshToken, accessToken}&lt;/div&gt;" style="text;html=1;align=left;verticalAlign=middle;resizable=0;points=[];autosize=1;strokeColor=none;fillColor=none;" parent="Qnf2eaOjIHQVNr2A7_gB-14" vertex="1">
          <mxGeometry x="310" y="20" width="270" height="570" as="geometry" />
        </mxCell>
        <mxCell id="Qnf2eaOjIHQVNr2A7_gB-3" value="&lt;font style=&quot;font-size: 16px;&quot;&gt;&lt;b&gt;High level design (API)&lt;/b&gt;&lt;/font&gt;" style="text;html=1;align=center;verticalAlign=middle;resizable=0;points=[];autosize=1;strokeColor=none;fillColor=none;" vertex="1" parent="Qnf2eaOjIHQVNr2A7_gB-14">
          <mxGeometry x="430" y="15" width="200" height="30" as="geometry" />
        </mxCell>
        <mxCell id="Qnf2eaOjIHQVNr2A7_gB-47" value="&lt;div&gt;&lt;span style=&quot;font-size: 16px;&quot;&gt;&lt;b&gt;services&lt;/b&gt;&lt;/span&gt;&lt;/div&gt;&lt;div&gt;&lt;b style=&quot;font-size: 16px; background-color: transparent; color: light-dark(rgb(0, 0, 0), rgb(255, 255, 255));&quot;&gt;/services&lt;/b&gt;&lt;/div&gt;&lt;div&gt;&lt;br&gt;&lt;/div&gt;&lt;div&gt;get service&lt;/div&gt;&lt;div&gt;private (pam apps)&lt;/div&gt;&lt;div&gt;/:id&lt;/div&gt;&lt;div&gt;GET&lt;/div&gt;&lt;div&gt;response: 200 ok Service&lt;/div&gt;" style="text;html=1;align=left;verticalAlign=middle;resizable=0;points=[];autosize=1;strokeColor=none;fillColor=none;" vertex="1" parent="Qnf2eaOjIHQVNr2A7_gB-14">
          <mxGeometry x="310" y="600" width="160" height="140" as="geometry" />
        </mxCell>
        <mxCell id="afeIu968NGdjf6M2ejIc-32" value="&lt;div&gt;&lt;span style=&quot;font-size: 16px;&quot;&gt;&lt;b&gt;promoCodes&lt;/b&gt;&lt;/span&gt;&lt;/div&gt;&lt;div&gt;&lt;b style=&quot;font-size: 16px; background-color: transparent; color: light-dark(rgb(0, 0, 0), rgb(255, 255, 255));&quot;&gt;/promoCodes&lt;/b&gt;&lt;/div&gt;&lt;div&gt;&lt;br&gt;&lt;/div&gt;&lt;div&gt;get promoCode details&lt;/div&gt;&lt;div&gt;private (checkout page)&lt;/div&gt;&lt;div&gt;/:promo&lt;/div&gt;&lt;div&gt;GET&lt;/div&gt;&lt;div&gt;response: 200 ok promoCode&lt;/div&gt;" style="text;html=1;align=left;verticalAlign=middle;resizable=0;points=[];autosize=1;strokeColor=none;fillColor=none;" vertex="1" parent="Qnf2eaOjIHQVNr2A7_gB-14">
          <mxGeometry x="310" y="740" width="180" height="140" as="geometry" />
        </mxCell>
        <mxCell id="Qnf2eaOjIHQVNr2A7_gB-15" value="" style="group" vertex="1" connectable="0" parent="1">
          <mxGeometry x="20" y="40" width="790" height="290" as="geometry" />
        </mxCell>
        <mxCell id="4O8g2oR4PRuLh8lg2v8v-18" value="" style="whiteSpace=wrap;html=1;fontSize=11;" parent="Qnf2eaOjIHQVNr2A7_gB-15" vertex="1">
          <mxGeometry width="790" height="280" as="geometry" />
        </mxCell>
        <mxCell id="4O8g2oR4PRuLh8lg2v8v-1" value="&lt;h1 style=&quot;margin-top: 0px;&quot;&gt;&lt;span style=&quot;background-color: transparent; color: light-dark(rgb(0, 0, 0), rgb(255, 255, 255));&quot;&gt;&lt;font style=&quot;font-size: 15px;&quot;&gt;Functional requirements&lt;/font&gt;&lt;/span&gt;&lt;/h1&gt;&lt;h1 style=&quot;margin-top: 0px; line-height: 100%;&quot;&gt;&lt;span style=&quot;font-size: 12px; font-weight: 400; line-height: 100%;&quot;&gt;Payments: user pay, use promocodes, subscribe to any project&amp;nbsp;&lt;/span&gt;&lt;span style=&quot;background-color: transparent; color: light-dark(rgb(0, 0, 0), rgb(255, 255, 255)); font-size: 12px; font-weight: 400; line-height: 100%;&quot;&gt;made by&amp;nbsp;&lt;/span&gt;&lt;span style=&quot;background-color: transparent; color: light-dark(rgb(0, 0, 0), rgb(255, 255, 255)); font-size: 12px; font-weight: 400; line-height: 100%;&quot;&gt;pamylka&lt;/span&gt;&lt;/h1&gt;&lt;h1 style=&quot;margin-top: 0px; line-height: 100%;&quot;&gt;&lt;span style=&quot;font-size: 12px; font-weight: 400; background-color: transparent; color: light-dark(rgb(0, 0, 0), rgb(255, 255, 255)); line-height: 100%;&quot;&gt;&amp;nbsp;authentication: user login, register, confirm email, reset password&amp;nbsp;&lt;/span&gt;&lt;span style=&quot;background-color: transparent; color: light-dark(rgb(0, 0, 0), rgb(255, 255, 255)); font-size: 12px; font-weight: 400;&quot;&gt;and 2fa&lt;/span&gt;&lt;/h1&gt;&lt;h1 style=&quot;margin-top: 0px; line-height: 100%;&quot;&gt;&lt;span style=&quot;font-size: 12px; font-weight: 400; background-color: transparent; color: light-dark(rgb(0, 0, 0), rgb(255, 255, 255)); line-height: 100%;&quot;&gt;profile: user view his transactions, subscriptions, and modify his&amp;nbsp;&lt;/span&gt;&lt;span style=&quot;background-color: transparent; color: light-dark(rgb(0, 0, 0), rgb(255, 255, 255)); font-size: 12px; font-weight: 400;&quot;&gt;data&lt;/span&gt;&lt;/h1&gt;&lt;div style=&quot;line-height: 100%;&quot;&gt;&lt;span style=&quot;background-color: transparent; color: light-dark(rgb(0, 0, 0), rgb(255, 255, 255));&quot;&gt;pam apps integration: different app clients should be able to use the authentication&amp;nbsp;&lt;/span&gt;&lt;span style=&quot;background-color: transparent; color: light-dark(rgb(0, 0, 0), rgb(255, 255, 255));&quot;&gt;resources, fetch services, related subscriptions of user&lt;/span&gt;&lt;/div&gt;" style="text;html=1;whiteSpace=wrap;overflow=hidden;rounded=0;" parent="Qnf2eaOjIHQVNr2A7_gB-15" vertex="1">
          <mxGeometry x="10" y="15" width="370" height="260" as="geometry" />
        </mxCell>
        <mxCell id="4O8g2oR4PRuLh8lg2v8v-14" value="&lt;h1 style=&quot;margin-top: 0px;&quot;&gt;&lt;span style=&quot;background-color: transparent; color: light-dark(rgb(0, 0, 0), rgb(255, 255, 255));&quot;&gt;&lt;font style=&quot;font-size: 15px;&quot;&gt;Non-functional requirements&lt;/font&gt;&lt;/span&gt;&lt;/h1&gt;&lt;h1 style=&quot;margin-top: 0px; line-height: 0%;&quot;&gt;&lt;span style=&quot;font-size: 12px; font-weight: 400;&quot;&gt;1. scalability: should be easily scalable&lt;/span&gt;&lt;/h1&gt;&lt;h1 style=&quot;margin-top: 0px; line-height: 0%;&quot;&gt;&lt;span style=&quot;background-color: transparent; color: light-dark(rgb(0, 0, 0), rgb(255, 255, 255)); font-size: 12px; font-weight: 400;&quot;&gt;2. availability: should be always available&lt;/span&gt;&lt;/h1&gt;&lt;h1 style=&quot;margin-top: 0px; line-height: 0%;&quot;&gt;&lt;span style=&quot;background-color: transparent; color: light-dark(rgb(0, 0, 0), rgb(255, 255, 255)); font-size: 12px; font-weight: 400;&quot;&gt;3. latency: should be a bad experience&lt;/span&gt;&lt;/h1&gt;&lt;h1 style=&quot;margin-top: 0px; line-height: 0%;&quot;&gt;&lt;span style=&quot;background-color: transparent; color: light-dark(rgb(0, 0, 0), rgb(255, 255, 255)); font-size: 12px; font-weight: normal;&quot;&gt;4. consistency: all data should be synced&lt;/span&gt;&lt;/h1&gt;&lt;div style=&quot;line-height: 0%;&quot;&gt;&lt;span style=&quot;background-color: transparent; color: light-dark(rgb(0, 0, 0), rgb(255, 255, 255));&quot;&gt;5. calculations: normal&lt;/span&gt;&lt;/div&gt;" style="text;html=1;whiteSpace=wrap;overflow=hidden;rounded=0;" parent="Qnf2eaOjIHQVNr2A7_gB-15" vertex="1">
          <mxGeometry x="420" y="80" width="350" height="150" as="geometry" />
        </mxCell>
        <mxCell id="4O8g2oR4PRuLh8lg2v8v-15" value="&lt;font style=&quot;font-size: 16px;&quot;&gt;&lt;b&gt;Requirements&lt;/b&gt;&lt;/font&gt;" style="text;html=1;align=center;verticalAlign=middle;resizable=0;points=[];autosize=1;strokeColor=none;fillColor=none;" parent="Qnf2eaOjIHQVNr2A7_gB-15" vertex="1">
          <mxGeometry x="310" width="130" height="30" as="geometry" />
        </mxCell>
        <mxCell id="Qnf2eaOjIHQVNr2A7_gB-16" value="" style="group" vertex="1" connectable="0" parent="1">
          <mxGeometry x="730" y="350" width="640" height="980" as="geometry" />
        </mxCell>
        <mxCell id="Qnf2eaOjIHQVNr2A7_gB-17" value="" style="whiteSpace=wrap;html=1;fontSize=11;" vertex="1" parent="Qnf2eaOjIHQVNr2A7_gB-16">
          <mxGeometry width="640" height="980" as="geometry" />
        </mxCell>
        <mxCell id="Qnf2eaOjIHQVNr2A7_gB-18" value="&lt;div&gt;&lt;b style=&quot;font-size: 16px; background-color: transparent; color: light-dark(rgb(0, 0, 0), rgb(255, 255, 255));&quot;&gt;User&lt;/b&gt;&lt;/div&gt;&lt;div&gt;&lt;br&gt;&lt;/div&gt;&lt;div&gt;{&lt;/div&gt;&lt;div&gt;id: uuidv4,&lt;/div&gt;&lt;div&gt;createdAt: Timestamp,&lt;/div&gt;&lt;div&gt;updatedAt: Timestamp,&lt;/div&gt;&lt;div&gt;email: {&lt;/div&gt;&lt;div&gt;&lt;span style=&quot;white-space: pre;&quot;&gt;&#x9;&lt;/span&gt;&lt;span style=&quot;white-space: pre;&quot;&gt;&#x9;&lt;/span&gt;email: string,&lt;br&gt;&lt;/div&gt;&lt;div&gt;&lt;span style=&quot;white-space: pre;&quot;&gt;&#x9;&lt;/span&gt;&lt;span style=&quot;white-space: pre;&quot;&gt;&#x9;&lt;/span&gt;confirmed: boolean&lt;br&gt;&lt;/div&gt;&lt;div&gt;&lt;span style=&quot;white-space: pre;&quot;&gt;&#x9;&lt;/span&gt;},&lt;/div&gt;&lt;div&gt;firstName: string,&lt;/div&gt;&lt;div&gt;lastName: string,&lt;/div&gt;&lt;div&gt;password: string,&lt;/div&gt;&lt;div&gt;subscriptions: [SubscriptionId],&lt;/div&gt;&lt;div&gt;&lt;span style=&quot;background-color: transparent; color: light-dark(rgb(0, 0, 0), rgb(255, 255, 255));&quot;&gt;}&lt;/span&gt;&lt;/div&gt;" style="text;html=1;align=left;verticalAlign=middle;resizable=0;points=[];autosize=1;strokeColor=none;fillColor=none;" vertex="1" parent="Qnf2eaOjIHQVNr2A7_gB-16">
          <mxGeometry x="30" y="25" width="190" height="230" as="geometry" />
        </mxCell>
        <mxCell id="Qnf2eaOjIHQVNr2A7_gB-19" value="&lt;div&gt;&lt;b style=&quot;font-size: 16px; background-color: transparent; color: light-dark(rgb(0, 0, 0), rgb(255, 255, 255));&quot;&gt;Transaction&lt;/b&gt;&lt;/div&gt;&lt;div&gt;&lt;br&gt;&lt;/div&gt;&lt;div&gt;{&lt;/div&gt;&lt;div&gt;&lt;span style=&quot;white-space: pre;&quot;&gt;&#x9;&lt;/span&gt;id: uuid,&lt;br&gt;&lt;/div&gt;&lt;div&gt;&lt;span style=&quot;white-space: pre;&quot;&gt;&#x9;&lt;/span&gt;subscriptionId: subscriptionId,&lt;br&gt;&lt;/div&gt;&lt;div&gt;&lt;span style=&quot;white-space: pre;&quot;&gt;&#x9;&lt;/span&gt;userId: userId,&lt;br&gt;&lt;/div&gt;&lt;div&gt;&lt;span style=&quot;white-space: pre;&quot;&gt;&#x9;&lt;/span&gt;createdAt: Timestamp,&lt;br&gt;&lt;/div&gt;&lt;div&gt;&lt;span style=&quot;white-space: pre;&quot;&gt;&#x9;&lt;/span&gt;updatedAt: Timestamp,&lt;/div&gt;&lt;div&gt;&lt;span style=&quot;white-space: pre;&quot;&gt;&#x9;&lt;/span&gt;status: enum {&lt;/div&gt;&lt;div&gt;&lt;span style=&quot;white-space: pre;&quot;&gt;&#x9;&lt;span style=&quot;white-space: pre;&quot;&gt;&#x9;&lt;/span&gt;&lt;/span&gt;PENDING,&amp;nbsp;&lt;/div&gt;&lt;div&gt;&lt;span style=&quot;white-space: pre;&quot;&gt;&#x9;&lt;/span&gt;&lt;span style=&quot;white-space: pre;&quot;&gt;&#x9;&lt;/span&gt;SUCCESS,&lt;/div&gt;&lt;div&gt;&lt;span style=&quot;white-space: pre;&quot;&gt;&#x9;&lt;/span&gt;&lt;span style=&quot;white-space: pre;&quot;&gt;&#x9;&lt;/span&gt;FAILED,&lt;br&gt;&lt;/div&gt;&lt;div&gt;&lt;span style=&quot;white-space: pre;&quot;&gt;&#x9;&lt;/span&gt;&lt;span style=&quot;white-space: pre;&quot;&gt;&#x9;&lt;/span&gt;CANCELLED&lt;br&gt;&lt;/div&gt;&lt;div&gt;&lt;span style=&quot;white-space: pre;&quot;&gt;&#x9;&lt;/span&gt;&lt;span style=&quot;white-space: pre;&quot;&gt;&#x9;&lt;/span&gt;}&lt;/div&gt;&lt;div&gt;&lt;span style=&quot;white-space: pre;&quot;&gt;&#x9;&lt;/span&gt;cost: number,&lt;br&gt;&lt;/div&gt;&lt;div&gt;&lt;span style=&quot;white-space: pre;&quot;&gt;&#x9;&lt;/span&gt;currency: Currency,&lt;/div&gt;&lt;div&gt;&lt;span style=&quot;white-space: pre;&quot;&gt;&#x9;&lt;/span&gt;hash: string,&lt;br&gt;&lt;/div&gt;&lt;div&gt;&lt;span style=&quot;white-space: pre;&quot;&gt;&#x9;&lt;/span&gt;promoCode: promoCodeId,&lt;br&gt;&lt;/div&gt;&lt;div&gt;&lt;span style=&quot;white-space: pre;&quot;&gt;&#x9;&lt;/span&gt;discount: string,&lt;br&gt;&lt;/div&gt;&lt;div&gt;&lt;span style=&quot;white-space: pre;&quot;&gt;&#x9;&lt;/span&gt;paid: number,&lt;br&gt;&lt;/div&gt;&lt;div&gt;&lt;span style=&quot;white-space: pre;&quot;&gt;&#x9;&lt;/span&gt;paymentGateway: {&lt;/div&gt;&lt;div&gt;&lt;span style=&quot;white-space: pre;&quot;&gt;&#x9;&lt;/span&gt;&lt;span style=&quot;white-space: pre;&quot;&gt;&#x9;&lt;/span&gt;trxId: string,&lt;br&gt;&lt;/div&gt;&lt;div&gt;&lt;span style=&quot;white-space: pre;&quot;&gt;&#x9;&lt;/span&gt;&lt;span style=&quot;white-space: pre;&quot;&gt;&#x9;&lt;/span&gt;orderId: string,&lt;br&gt;&lt;/div&gt;&lt;div&gt;&lt;span style=&quot;white-space: pre;&quot;&gt;&#x9;&lt;/span&gt;&lt;span style=&quot;white-space: pre;&quot;&gt;&#x9;&lt;/span&gt;orderReference: string,&lt;br&gt;&lt;/div&gt;&lt;div&gt;&lt;span style=&quot;white-space: pre;&quot;&gt;&#x9;&lt;span style=&quot;white-space: pre;&quot;&gt;&#x9;&lt;/span&gt;&lt;/span&gt;&lt;span style=&quot;background-color: transparent; color: light-dark(rgb(0, 0, 0), rgb(255, 255, 255));&quot;&gt;signature: {&lt;/span&gt;&lt;/div&gt;&lt;div&gt;&lt;span style=&quot;white-space-collapse: preserve;&quot;&gt;&#x9;&lt;/span&gt;&lt;span style=&quot;white-space-collapse: preserve;&quot;&gt;&#x9;&lt;span style=&quot;white-space: pre;&quot;&gt;&#x9;&lt;/span&gt;&lt;/span&gt;signature: string,&lt;br&gt;&lt;/div&gt;&lt;div&gt;&lt;span style=&quot;white-space-collapse: preserve;&quot;&gt;&#x9;&lt;/span&gt;&lt;span style=&quot;white-space-collapse: preserve;&quot;&gt;&#x9;&lt;span style=&quot;white-space: pre;&quot;&gt;&#x9;&lt;/span&gt;&lt;/span&gt;valid: boolean&lt;br&gt;&lt;/div&gt;&lt;div&gt;&lt;span style=&quot;white-space-collapse: preserve;&quot;&gt;&#x9;&lt;span style=&quot;white-space: pre;&quot;&gt;&#x9;&lt;/span&gt;&lt;/span&gt;},&lt;/div&gt;&lt;div&gt;&lt;span style=&quot;white-space: pre;&quot;&gt;&#x9;&lt;/span&gt;},&lt;/div&gt;&lt;div&gt;}&lt;/div&gt;" style="text;html=1;align=left;verticalAlign=middle;resizable=0;points=[];autosize=1;strokeColor=none;fillColor=none;" vertex="1" parent="Qnf2eaOjIHQVNr2A7_gB-16">
          <mxGeometry x="30" y="265" width="210" height="450" as="geometry" />
        </mxCell>
        <mxCell id="Qnf2eaOjIHQVNr2A7_gB-20" value="&lt;div&gt;&lt;span style=&quot;font-size: 16px;&quot;&gt;&lt;b&gt;Subscription&lt;/b&gt;&lt;/span&gt;&lt;/div&gt;&lt;div&gt;&lt;br&gt;&lt;/div&gt;&lt;div&gt;{&lt;/div&gt;&lt;div&gt;&lt;span style=&quot;white-space: pre;&quot;&gt;&#x9;&lt;/span&gt;id: uuid,&lt;br&gt;&lt;/div&gt;&lt;div&gt;&lt;span style=&quot;background-color: transparent; color: light-dark(rgb(0, 0, 0), rgb(255, 255, 255)); white-space-collapse: preserve;&quot;&gt;&#x9;&lt;/span&gt;&lt;span style=&quot;background-color: transparent; color: light-dark(rgb(0, 0, 0), rgb(255, 255, 255)); white-space-collapse: preserve;&quot;&gt;serviceId: serviceId,&lt;/span&gt;&lt;/div&gt;&lt;div&gt;&lt;span style=&quot;white-space-collapse: preserve; background-color: transparent; color: light-dark(rgb(0, 0, 0), rgb(255, 255, 255));&quot;&gt;&lt;span style=&quot;white-space: pre;&quot;&gt;&#x9;&lt;/span&gt;transaction: transactionId,&lt;br&gt;&lt;/span&gt;&lt;/div&gt;&lt;div&gt;&lt;span style=&quot;white-space-collapse: preserve; background-color: transparent; color: light-dark(rgb(0, 0, 0), rgb(255, 255, 255));&quot;&gt;&lt;span style=&quot;white-space: pre;&quot;&gt;&#x9;&lt;/span&gt;&lt;/span&gt;&lt;span style=&quot;white-space-collapse: preserve; background-color: transparent; color: light-dark(rgb(0, 0, 0), rgb(255, 255, 255));&quot;&gt;status: Status,&lt;/span&gt;&lt;/div&gt;&lt;div&gt;&lt;span style=&quot;white-space: pre;&quot;&gt;&#x9;&lt;/span&gt;createdAt: Timestamp,&lt;br&gt;&lt;/div&gt;&lt;div&gt;&lt;span style=&quot;white-space: pre;&quot;&gt;&#x9;&lt;/span&gt;updatedAt: Timestamp,&lt;/div&gt;&lt;div&gt;&lt;span style=&quot;white-space-collapse: preserve; background-color: transparent; color: light-dark(rgb(0, 0, 0), rgb(255, 255, 255));&quot;&gt;&#x9;&lt;/span&gt;&lt;span style=&quot;white-space-collapse: preserve; background-color: transparent; color: light-dark(rgb(0, 0, 0), rgb(255, 255, 255));&quot;&gt;period: Period&lt;/span&gt;&lt;/div&gt;&lt;div&gt;&lt;span style=&quot;background-color: transparent; color: light-dark(rgb(0, 0, 0), rgb(255, 255, 255)); white-space-collapse: preserve;&quot;&gt;&#x9;&lt;/span&gt;&lt;span style=&quot;background-color: transparent; color: light-dark(rgb(0, 0, 0), rgb(255, 255, 255));&quot;&gt;startDate: Date,&lt;/span&gt;&lt;/div&gt;&lt;div&gt;&lt;span style=&quot;white-space: pre;&quot;&gt;&#x9;&lt;/span&gt;endDate: Date,&lt;br&gt;&lt;/div&gt;&lt;div&gt;&lt;span style=&quot;background-color: transparent; color: light-dark(rgb(0, 0, 0), rgb(255, 255, 255));&quot;&gt;}&lt;/span&gt;&lt;/div&gt;&lt;div&gt;&lt;br&gt;&lt;/div&gt;" style="text;html=1;align=left;verticalAlign=middle;resizable=0;points=[];autosize=1;strokeColor=none;fillColor=none;" vertex="1" parent="Qnf2eaOjIHQVNr2A7_gB-16">
          <mxGeometry x="300" y="40" width="190" height="220" as="geometry" />
        </mxCell>
        <mxCell id="Qnf2eaOjIHQVNr2A7_gB-21" value="&lt;font style=&quot;font-size: 16px;&quot;&gt;&lt;b&gt;Data models&lt;/b&gt;&lt;/font&gt;" style="text;html=1;align=center;verticalAlign=middle;resizable=0;points=[];autosize=1;strokeColor=none;fillColor=none;" vertex="1" parent="Qnf2eaOjIHQVNr2A7_gB-16">
          <mxGeometry x="470" y="15" width="120" height="30" as="geometry" />
        </mxCell>
        <mxCell id="Qnf2eaOjIHQVNr2A7_gB-22" value="&lt;div&gt;&lt;span style=&quot;font-size: 16px;&quot;&gt;&lt;b&gt;Service&lt;/b&gt;&lt;/span&gt;&lt;/div&gt;&lt;div&gt;&lt;span style=&quot;font-size: 16px;&quot;&gt;&lt;b&gt;&lt;br&gt;&lt;/b&gt;&lt;/span&gt;&lt;/div&gt;&lt;div&gt;{&lt;/div&gt;&lt;div&gt;&lt;span style=&quot;white-space: pre;&quot;&gt;&#x9;&lt;/span&gt;id: uuid,&lt;br&gt;&lt;/div&gt;&lt;div&gt;&lt;span style=&quot;white-space: pre;&quot;&gt;&#x9;&lt;/span&gt;createdAt: Timestamp,&lt;br&gt;&lt;/div&gt;&lt;div&gt;&lt;span style=&quot;white-space: pre;&quot;&gt;&#x9;&lt;/span&gt;updatedAt: Timestamp,&lt;br&gt;&lt;/div&gt;&lt;div&gt;&lt;span style=&quot;white-space: pre;&quot;&gt;&#x9;&lt;/span&gt;name: string,&lt;/div&gt;&lt;div&gt;&lt;span style=&quot;white-space: pre;&quot;&gt;&#x9;&lt;/span&gt;description: string,&lt;br&gt;&lt;/div&gt;&lt;div&gt;&lt;span style=&quot;white-space: pre;&quot;&gt;&#x9;&lt;/span&gt;redirectUrl: string,&lt;br&gt;&lt;/div&gt;&lt;div&gt;&lt;span style=&quot;white-space: pre;&quot;&gt;&#x9;&lt;/span&gt;failureRedirectUrl: string,&lt;br&gt;&lt;/div&gt;&lt;div&gt;&lt;span style=&quot;white-space: pre;&quot;&gt;&#x9;&lt;/span&gt;signedUsersCount: numbers,&lt;br&gt;&lt;/div&gt;&lt;div&gt;&lt;span style=&quot;white-space: pre;&quot;&gt;&#x9;&lt;/span&gt;currentActiveSubscriptionsCount: numbers&lt;br&gt;&lt;/div&gt;&lt;div&gt;&lt;span style=&quot;white-space: pre;&quot;&gt;&#x9;&lt;/span&gt;availableSubscriptions: [&lt;/div&gt;&lt;div&gt;&lt;span style=&quot;white-space: pre;&quot;&gt;&#x9;&lt;span style=&quot;white-space: pre;&quot;&gt;&#x9;&lt;/span&gt;&lt;/span&gt;{&lt;/div&gt;&lt;div&gt;&lt;span style=&quot;white-space: pre;&quot;&gt;&#x9;&lt;span style=&quot;white-space: pre;&quot;&gt;&#x9;&lt;span style=&quot;white-space: pre;&quot;&gt;&#x9;&lt;/span&gt;&lt;/span&gt;period: &lt;/span&gt;Period&lt;span style=&quot;white-space: pre;&quot;&gt;,&lt;/span&gt;&lt;/div&gt;&lt;div&gt;&lt;span style=&quot;white-space: pre;&quot;&gt;&#x9;&lt;/span&gt;&lt;span style=&quot;white-space: pre;&quot;&gt;&#x9;&lt;span style=&quot;white-space: pre;&quot;&gt;&#x9;&lt;/span&gt;&lt;/span&gt;cost:&amp;nbsp;number,&lt;br&gt;&lt;/div&gt;&lt;div&gt;&lt;span style=&quot;white-space: pre;&quot;&gt;&#x9;&lt;/span&gt;&lt;span style=&quot;white-space: pre;&quot;&gt;&#x9;&lt;span style=&quot;white-space: pre;&quot;&gt;&#x9;&lt;/span&gt;&lt;/span&gt;currency: Currency&lt;br&gt;&lt;/div&gt;&lt;div&gt;&lt;span style=&quot;white-space: pre;&quot;&gt;&#x9;&lt;span style=&quot;white-space: pre;&quot;&gt;&#x9;&lt;/span&gt;&lt;/span&gt;},&lt;/div&gt;&lt;div&gt;&lt;span style=&quot;white-space: pre;&quot;&gt;&#x9;&lt;/span&gt;]&lt;/div&gt;&lt;div&gt;}&lt;/div&gt;&lt;div&gt;&lt;br&gt;&lt;/div&gt;" style="text;html=1;align=left;verticalAlign=middle;resizable=0;points=[];autosize=1;strokeColor=none;fillColor=none;" vertex="1" parent="Qnf2eaOjIHQVNr2A7_gB-16">
          <mxGeometry x="290" y="235" width="280" height="330" as="geometry" />
        </mxCell>
        <mxCell id="Qnf2eaOjIHQVNr2A7_gB-24" value="&lt;div&gt;&lt;span style=&quot;font-size: 16px;&quot;&gt;&lt;b&gt;promoCode&lt;/b&gt;&lt;/span&gt;&lt;/div&gt;&lt;div&gt;&lt;span style=&quot;font-size: 16px;&quot;&gt;&lt;b&gt;&lt;br&gt;&lt;/b&gt;&lt;/span&gt;&lt;/div&gt;&lt;div&gt;{&lt;/div&gt;&lt;div&gt;&lt;span style=&quot;white-space: pre;&quot;&gt;&#x9;&lt;/span&gt;id: uuid,&lt;br&gt;&lt;/div&gt;&lt;div&gt;&lt;span style=&quot;white-space: pre;&quot;&gt;&#x9;&lt;/span&gt;createdAt: Timestamp,&lt;br&gt;&lt;/div&gt;&lt;div&gt;&lt;span style=&quot;white-space: pre;&quot;&gt;&#x9;&lt;/span&gt;updatedAt: Timestamp,&lt;br&gt;&lt;/div&gt;&lt;div&gt;&lt;span style=&quot;white-space: pre;&quot;&gt;&#x9;&lt;/span&gt;code: string,&lt;br&gt;&lt;/div&gt;&lt;div&gt;&lt;span style=&quot;white-space: pre;&quot;&gt;&#x9;&lt;/span&gt;type: emum {percent, amount},&lt;br&gt;&lt;/div&gt;&lt;div&gt;&lt;span style=&quot;white-space: pre;&quot;&gt;&#x9;&lt;/span&gt;amount: number,&lt;br&gt;&lt;/div&gt;&lt;div&gt;&lt;span style=&quot;white-space: pre;&quot;&gt;&#x9;&lt;/span&gt;currency?: Currency,&lt;br&gt;&lt;/div&gt;&lt;div&gt;&lt;span style=&quot;white-space: pre;&quot;&gt;&#x9;&lt;/span&gt;expires: Date,&lt;br&gt;&lt;/div&gt;&lt;div&gt;&lt;span style=&quot;white-space: pre;&quot;&gt;&#x9;&lt;/span&gt;status: Status&lt;br&gt;&lt;/div&gt;&lt;div&gt;}&lt;/div&gt;" style="text;html=1;align=left;verticalAlign=middle;resizable=0;points=[];autosize=1;strokeColor=none;fillColor=none;" vertex="1" parent="Qnf2eaOjIHQVNr2A7_gB-16">
          <mxGeometry x="280" y="525" width="210" height="210" as="geometry" />
        </mxCell>
        <mxCell id="Qnf2eaOjIHQVNr2A7_gB-25" value="&lt;div&gt;&lt;span style=&quot;font-size: 16px;&quot;&gt;&lt;b&gt;Currency (Enum)&lt;/b&gt;&lt;/span&gt;&lt;/div&gt;&lt;div&gt;&lt;span style=&quot;background-color: transparent; color: light-dark(rgb(0, 0, 0), rgb(255, 255, 255));&quot;&gt;{&lt;/span&gt;&lt;span style=&quot;background-color: transparent; color: light-dark(rgb(0, 0, 0), rgb(255, 255, 255));&quot;&gt;EGP, USD}&lt;/span&gt;&lt;/div&gt;" style="text;html=1;align=left;verticalAlign=middle;resizable=0;points=[];autosize=1;strokeColor=none;fillColor=none;" vertex="1" parent="Qnf2eaOjIHQVNr2A7_gB-16">
          <mxGeometry x="30" y="905" width="150" height="50" as="geometry" />
        </mxCell>
        <mxCell id="Qnf2eaOjIHQVNr2A7_gB-44" value="&lt;div&gt;&lt;span style=&quot;font-size: 16px;&quot;&gt;&lt;b&gt;Status (Enum)&lt;/b&gt;&lt;/span&gt;&lt;/div&gt;&lt;div&gt;{Active, Expired&lt;span style=&quot;background-color: transparent; color: light-dark(rgb(0, 0, 0), rgb(255, 255, 255));&quot;&gt;}&lt;/span&gt;&lt;/div&gt;" style="text;html=1;align=left;verticalAlign=middle;resizable=0;points=[];autosize=1;strokeColor=none;fillColor=none;" vertex="1" parent="Qnf2eaOjIHQVNr2A7_gB-16">
          <mxGeometry x="30" y="735" width="130" height="50" as="geometry" />
        </mxCell>
        <mxCell id="Qnf2eaOjIHQVNr2A7_gB-45" value="&lt;div&gt;&lt;span style=&quot;font-size: 16px;&quot;&gt;&lt;b&gt;Period (Enum)&lt;/b&gt;&lt;/span&gt;&lt;/div&gt;&lt;div&gt;{month, year, lifetime, onetime&lt;span style=&quot;background-color: transparent; color: light-dark(rgb(0, 0, 0), rgb(255, 255, 255));&quot;&gt;}&lt;/span&gt;&lt;/div&gt;" style="text;html=1;align=left;verticalAlign=middle;resizable=0;points=[];autosize=1;strokeColor=none;fillColor=none;" vertex="1" parent="Qnf2eaOjIHQVNr2A7_gB-16">
          <mxGeometry x="30" y="850" width="190" height="50" as="geometry" />
        </mxCell>
        <mxCell id="Qnf2eaOjIHQVNr2A7_gB-46" value="&lt;div&gt;&lt;span style=&quot;font-size: 16px;&quot;&gt;&lt;b&gt;refreshToken&lt;/b&gt;&lt;/span&gt;&lt;/div&gt;&lt;div&gt;&lt;span style=&quot;font-size: 16px;&quot;&gt;&lt;b&gt;&lt;br&gt;&lt;/b&gt;&lt;/span&gt;&lt;/div&gt;&lt;div&gt;{&lt;/div&gt;&lt;div&gt;&lt;span style=&quot;white-space: pre;&quot;&gt;&#x9;&lt;/span&gt;id: uuid,&lt;br&gt;&lt;/div&gt;&lt;div&gt;&lt;span style=&quot;white-space: pre;&quot;&gt;&#x9;&lt;/span&gt;userId: string,&lt;/div&gt;&lt;div&gt;&lt;span style=&quot;white-space: pre;&quot;&gt;&#x9;&lt;/span&gt;createdAt: Timestamp,&lt;br&gt;&lt;/div&gt;&lt;div&gt;&lt;span style=&quot;white-space: pre;&quot;&gt;&#x9;&lt;/span&gt;updatedAt: Timestamp,&lt;br&gt;&lt;/div&gt;&lt;div&gt;&lt;span style=&quot;white-space: pre;&quot;&gt;&#x9;&lt;/span&gt;token: string,&lt;/div&gt;&lt;div&gt;&lt;span style=&quot;white-space: pre;&quot;&gt;&#x9;&lt;/span&gt;expires: Date,&lt;br&gt;&lt;/div&gt;&lt;div&gt;&lt;span style=&quot;white-space: pre;&quot;&gt;&#x9;&lt;/span&gt;finalExpire: Date,&lt;/div&gt;&lt;div&gt;&lt;span style=&quot;white-space: pre;&quot;&gt;&#x9;&lt;/span&gt;alternative: refreshTokenId,&lt;br&gt;&lt;/div&gt;&lt;div&gt;&lt;span style=&quot;white-space: pre;&quot;&gt;&#x9;&lt;/span&gt;status: enum {&lt;/div&gt;&lt;div&gt;&lt;span style=&quot;white-space: pre;&quot;&gt;&#x9;&lt;/span&gt;&lt;span style=&quot;white-space: pre;&quot;&gt;&#x9;&lt;/span&gt;...Status,&amp;nbsp;&lt;/div&gt;&lt;div&gt;&lt;span style=&quot;white-space: pre;&quot;&gt;&#x9;&lt;/span&gt;&lt;span style=&quot;white-space: pre;&quot;&gt;&#x9;&lt;/span&gt;revoked&lt;/div&gt;&lt;div&gt;&lt;span style=&quot;white-space: pre;&quot;&gt;&#x9;&lt;/span&gt;},&lt;/div&gt;&lt;div&gt;}&lt;/div&gt;" style="text;html=1;align=left;verticalAlign=middle;resizable=0;points=[];autosize=1;strokeColor=none;fillColor=none;" vertex="1" parent="Qnf2eaOjIHQVNr2A7_gB-16">
          <mxGeometry x="280" y="730" width="190" height="250" as="geometry" />
        </mxCell>
        <mxCell id="Qnf2eaOjIHQVNr2A7_gB-48" value="" style="group" vertex="1" connectable="0" parent="1">
          <mxGeometry x="730" y="1350" width="640" height="433" as="geometry" />
        </mxCell>
        <mxCell id="Qnf2eaOjIHQVNr2A7_gB-49" value="" style="whiteSpace=wrap;html=1;fontSize=11;" vertex="1" parent="Qnf2eaOjIHQVNr2A7_gB-48">
          <mxGeometry width="640" height="433" as="geometry" />
        </mxCell>
        <mxCell id="Qnf2eaOjIHQVNr2A7_gB-50" value="&lt;div&gt;&lt;b style=&quot;font-size: 16px; background-color: transparent; color: light-dark(rgb(0, 0, 0), rgb(255, 255, 255));&quot;&gt;Payments&lt;/b&gt;&lt;/div&gt;&lt;div&gt;&lt;br&gt;&lt;/div&gt;&lt;div&gt;actor: user, pam apps&lt;/div&gt;&lt;div&gt;&lt;br&gt;&lt;/div&gt;&lt;div&gt;scenario:&lt;/div&gt;&lt;div&gt;pam apps should be able to redirect users to&lt;/div&gt;&lt;div&gt;a dynamic checkout page, then user should&amp;nbsp;&lt;/div&gt;&lt;div&gt;be able to pay there for the specified service,&amp;nbsp;&lt;/div&gt;&lt;div&gt;use promocodes for&amp;nbsp;&lt;span style=&quot;background-color: transparent; color: light-dark(rgb(0, 0, 0), rgb(255, 255, 255));&quot;&gt;discounts.&lt;/span&gt;&lt;/div&gt;" style="text;html=1;align=left;verticalAlign=middle;resizable=0;points=[];autosize=1;strokeColor=none;fillColor=none;" vertex="1" parent="Qnf2eaOjIHQVNr2A7_gB-48">
          <mxGeometry x="30" y="55" width="270" height="150" as="geometry" />
        </mxCell>
        <mxCell id="Qnf2eaOjIHQVNr2A7_gB-53" value="&lt;font style=&quot;font-size: 16px;&quot;&gt;&lt;b&gt;Use cases&lt;/b&gt;&lt;/font&gt;" style="text;html=1;align=center;verticalAlign=middle;resizable=0;points=[];autosize=1;strokeColor=none;fillColor=none;" vertex="1" parent="Qnf2eaOjIHQVNr2A7_gB-48">
          <mxGeometry x="480" y="15" width="100" height="30" as="geometry" />
        </mxCell>
        <mxCell id="Qnf2eaOjIHQVNr2A7_gB-56" value="&lt;div&gt;&lt;span style=&quot;font-size: 16px;&quot;&gt;&lt;b&gt;pam apps integration&lt;/b&gt;&lt;/span&gt;&lt;/div&gt;&lt;div&gt;&lt;br&gt;&lt;/div&gt;&lt;div&gt;Actor: pam apps&lt;/div&gt;&lt;div&gt;&lt;br&gt;&lt;/div&gt;&lt;div&gt;&lt;span style=&quot;background-color: transparent; color: light-dark(rgb(0, 0, 0), rgb(255, 255, 255));&quot;&gt;scenarios:&lt;/span&gt;&lt;/div&gt;&lt;div&gt;&lt;span style=&quot;background-color: transparent; color: light-dark(rgb(0, 0, 0), rgb(255, 255, 255));&quot;&gt;apps should be able to authenticate, authorize&lt;/span&gt;&lt;/div&gt;&lt;div&gt;the user using this project&lt;/div&gt;&lt;div&gt;apps should be able to fetch up to date data&amp;nbsp;&lt;/div&gt;&lt;div&gt;about the service they&#39;re providing to show the&amp;nbsp;&lt;/div&gt;&lt;div&gt;client on the ui, and use it also serverside&lt;/div&gt;&lt;div&gt;apps have acess to related services and can&lt;/div&gt;&lt;div&gt;determine if user still has an active subscription&lt;/div&gt;&lt;div&gt;for their related services or not&lt;/div&gt;" style="text;html=1;align=left;verticalAlign=middle;resizable=0;points=[];autosize=1;strokeColor=none;fillColor=none;" vertex="1" parent="Qnf2eaOjIHQVNr2A7_gB-48">
          <mxGeometry x="30" y="205" width="270" height="210" as="geometry" />
        </mxCell>
        <mxCell id="Qnf2eaOjIHQVNr2A7_gB-57" value="&lt;div&gt;&lt;span style=&quot;font-size: 16px;&quot;&gt;&lt;b&gt;Authentication &amp;amp; Authorization&lt;/b&gt;&lt;/span&gt;&lt;/div&gt;&lt;div&gt;&lt;span style=&quot;font-size: 16px;&quot;&gt;&lt;b&gt;&lt;br&gt;&lt;/b&gt;&lt;/span&gt;&lt;/div&gt;&lt;div&gt;actor: user&lt;/div&gt;&lt;div&gt;&lt;br&gt;&lt;/div&gt;&lt;div&gt;scenario:&lt;/div&gt;&lt;div&gt;user should seemlesly login, register, confirm&lt;/div&gt;&lt;div&gt;email, reset password, and configure 2FA&lt;/div&gt;" style="text;html=1;align=left;verticalAlign=middle;resizable=0;points=[];autosize=1;strokeColor=none;fillColor=none;" vertex="1" parent="Qnf2eaOjIHQVNr2A7_gB-48">
          <mxGeometry x="300" y="70" width="260" height="120" as="geometry" />
        </mxCell>
        <mxCell id="Qnf2eaOjIHQVNr2A7_gB-58" value="&lt;div&gt;&lt;span style=&quot;font-size: 16px;&quot;&gt;&lt;b&gt;profile&lt;/b&gt;&lt;/span&gt;&lt;/div&gt;&lt;div&gt;&lt;span style=&quot;font-size: 16px;&quot;&gt;&lt;b&gt;&lt;br&gt;&lt;/b&gt;&lt;/span&gt;&lt;/div&gt;&lt;div&gt;actor: user&lt;/div&gt;&lt;div&gt;&lt;br&gt;&lt;/div&gt;&lt;div&gt;scenario:&lt;/div&gt;&lt;div&gt;user should have the ability to view his&amp;nbsp;&lt;/div&gt;&lt;div&gt;subscriptions, transactions &amp;amp; timelines for every&amp;nbsp;&lt;/div&gt;&lt;div&gt;one of them, and transactions. Also user should be&lt;/div&gt;&lt;div&gt;able to see, modify his personal-info, settings...etc.&lt;/div&gt;" style="text;html=1;align=left;verticalAlign=middle;resizable=0;points=[];autosize=1;strokeColor=none;fillColor=none;" vertex="1" parent="Qnf2eaOjIHQVNr2A7_gB-48">
          <mxGeometry x="300" y="220" width="290" height="150" as="geometry" />
        </mxCell>
        <mxCell id="afeIu968NGdjf6M2ejIc-1" value="&lt;div&gt;&lt;b style=&quot;font-size: 16px; background-color: transparent; color: light-dark(rgb(0, 0, 0), rgb(255, 255, 255));&quot;&gt;Payments&lt;/b&gt;&lt;/div&gt;&lt;div&gt;&lt;br&gt;&lt;/div&gt;&lt;div&gt;actor: user, pam apps&lt;/div&gt;&lt;div&gt;&lt;br&gt;&lt;/div&gt;&lt;div&gt;scenario:&lt;/div&gt;&lt;div&gt;pam apps should be able to redirect users to&lt;/div&gt;&lt;div&gt;a dynamic checkout page, then user should&amp;nbsp;&lt;/div&gt;&lt;div&gt;be able to pay there for the specified service,&amp;nbsp;&lt;/div&gt;&lt;div&gt;use promocodes for&amp;nbsp;&lt;span style=&quot;background-color: transparent; color: light-dark(rgb(0, 0, 0), rgb(255, 255, 255));&quot;&gt;discounts.&lt;/span&gt;&lt;/div&gt;" style="text;html=1;align=left;verticalAlign=middle;resizable=0;points=[];autosize=1;strokeColor=none;fillColor=none;" vertex="1" parent="1">
          <mxGeometry x="1460" y="150" width="270" height="150" as="geometry" />
        </mxCell>
        <mxCell id="afeIu968NGdjf6M2ejIc-13" value="" style="shape=umlLifeline;perimeter=lifelinePerimeter;whiteSpace=wrap;html=1;container=1;dropTarget=0;collapsible=0;recursiveResize=0;outlineConnect=0;portConstraint=eastwest;newEdgeStyle={&quot;curved&quot;:0,&quot;rounded&quot;:0};participant=umlActor;size=50;" vertex="1" parent="1">
          <mxGeometry x="1581.43" y="395" width="27.14" height="1190" as="geometry" />
        </mxCell>
        <mxCell id="afeIu968NGdjf6M2ejIc-16" value="" style="html=1;points=[[0,0,0,0,5],[0,1,0,0,-5],[1,0,0,0,5],[1,1,0,0,-5]];perimeter=orthogonalPerimeter;outlineConnect=0;targetShapes=umlLifeline;portConstraint=eastwest;newEdgeStyle={&quot;curved&quot;:0,&quot;rounded&quot;:0};" vertex="1" parent="afeIu968NGdjf6M2ejIc-13">
          <mxGeometry x="8.57" y="70" width="10" height="1120" as="geometry" />
        </mxCell>
        <mxCell id="afeIu968NGdjf6M2ejIc-14" value="pam app pricing page" style="shape=umlLifeline;perimeter=lifelinePerimeter;whiteSpace=wrap;html=1;container=1;dropTarget=0;collapsible=0;recursiveResize=0;outlineConnect=0;portConstraint=eastwest;newEdgeStyle={&quot;curved&quot;:0,&quot;rounded&quot;:0};" vertex="1" parent="1">
          <mxGeometry x="1700" y="395" width="100" height="695" as="geometry" />
        </mxCell>
        <mxCell id="afeIu968NGdjf6M2ejIc-17" value="" style="html=1;points=[[0,0,0,0,5],[0,1,0,0,-5],[1,0,0,0,5],[1,1,0,0,-5]];perimeter=orthogonalPerimeter;outlineConnect=0;targetShapes=umlLifeline;portConstraint=eastwest;newEdgeStyle={&quot;curved&quot;:0,&quot;rounded&quot;:0};" vertex="1" parent="afeIu968NGdjf6M2ejIc-14">
          <mxGeometry x="45" y="70" width="10" height="40" as="geometry" />
        </mxCell>
        <mxCell id="afeIu968NGdjf6M2ejIc-15" value="user" style="text;html=1;align=center;verticalAlign=middle;resizable=0;points=[];autosize=1;strokeColor=none;fillColor=none;" vertex="1" parent="1">
          <mxGeometry x="1570" y="365" width="50" height="30" as="geometry" />
        </mxCell>
        <mxCell id="afeIu968NGdjf6M2ejIc-18" value="clicks the pay button" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;curved=0;exitX=1;exitY=0;exitDx=0;exitDy=5;exitPerimeter=0;entryX=0;entryY=0;entryDx=0;entryDy=5;entryPerimeter=0;" edge="1" parent="1" source="afeIu968NGdjf6M2ejIc-16" target="afeIu968NGdjf6M2ejIc-17">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="afeIu968NGdjf6M2ejIc-19" value="checkout page" style="shape=umlLifeline;whiteSpace=wrap;html=1;container=1;dropTarget=0;collapsible=0;recursiveResize=0;outlineConnect=0;portConstraint=eastwest;newEdgeStyle={&quot;curved&quot;:0,&quot;rounded&quot;:0};targetShapes=umlLifeline;participant=label;points=[[0,0,0,0,5],[0,1,0,0,-5],[1,0,0,0,5],[1,1,0,0,-5]];perimeter=rectanglePerimeter;" vertex="1" parent="1">
          <mxGeometry x="1870" y="400" width="100" height="680" as="geometry" />
        </mxCell>
        <mxCell id="afeIu968NGdjf6M2ejIc-20" value="" style="html=1;points=[[0,0,0,0,5],[0,1,0,0,-5],[1,0,0,0,5],[1,1,0,0,-5]];perimeter=orthogonalPerimeter;outlineConnect=0;targetShapes=umlLifeline;portConstraint=eastwest;newEdgeStyle={&quot;curved&quot;:0,&quot;rounded&quot;:0};" vertex="1" parent="afeIu968NGdjf6M2ejIc-19">
          <mxGeometry x="45" y="70" width="10" height="420" as="geometry" />
        </mxCell>
        <mxCell id="afeIu968NGdjf6M2ejIc-21" value="sending to checkout page" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;curved=0;" edge="1" parent="1" source="afeIu968NGdjf6M2ejIc-17">
          <mxGeometry y="5" relative="1" as="geometry">
            <mxPoint x="1914" y="488" as="targetPoint" />
            <mxPoint as="offset" />
          </mxGeometry>
        </mxCell>
        <mxCell id="afeIu968NGdjf6M2ejIc-22" value="opens displaying a promo input field" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;curved=0;" edge="1" parent="1" source="afeIu968NGdjf6M2ejIc-20" target="afeIu968NGdjf6M2ejIc-16">
          <mxGeometry relative="1" as="geometry">
            <mxPoint x="1610.7894736842109" y="540" as="targetPoint" />
            <Array as="points">
              <mxPoint x="1680" y="540" />
              <mxPoint x="1680" y="540" />
            </Array>
          </mxGeometry>
        </mxCell>
        <mxCell id="afeIu968NGdjf6M2ejIc-23" value="enters a promocode" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;curved=0;" edge="1" parent="1" source="afeIu968NGdjf6M2ejIc-16" target="afeIu968NGdjf6M2ejIc-20">
          <mxGeometry relative="1" as="geometry">
            <mxPoint x="1910" y="570" as="targetPoint" />
            <Array as="points">
              <mxPoint x="1680" y="580" />
              <mxPoint x="1680" y="580" />
            </Array>
          </mxGeometry>
        </mxCell>
        <mxCell id="afeIu968NGdjf6M2ejIc-28" value="API &amp;amp; DB" style="shape=umlLifeline;whiteSpace=wrap;html=1;container=1;dropTarget=0;collapsible=0;recursiveResize=0;outlineConnect=0;portConstraint=eastwest;newEdgeStyle={&quot;curved&quot;:0,&quot;rounded&quot;:0};targetShapes=umlLifeline;participant=label;points=[[0,0,0,0,5],[0,1,0,0,-5],[1,0,0,0,5],[1,1,0,0,-5]];perimeter=rectanglePerimeter;" vertex="1" parent="1">
          <mxGeometry x="2030" y="400" width="100" height="1180" as="geometry" />
        </mxCell>
        <mxCell id="afeIu968NGdjf6M2ejIc-29" value="" style="html=1;points=[[0,0,0,0,5],[0,1,0,0,-5],[1,0,0,0,5],[1,1,0,0,-5]];perimeter=orthogonalPerimeter;outlineConnect=0;targetShapes=umlLifeline;portConstraint=eastwest;newEdgeStyle={&quot;curved&quot;:0,&quot;rounded&quot;:0};" vertex="1" parent="afeIu968NGdjf6M2ejIc-28">
          <mxGeometry x="45" y="150" width="10" height="1030" as="geometry" />
        </mxCell>
        <mxCell id="afeIu968NGdjf6M2ejIc-30" value="GET /promocodes/:promo" style="html=1;verticalAlign=bottom;endArrow=block;curved=0;rounded=0;" edge="1" parent="1" target="afeIu968NGdjf6M2ejIc-29">
          <mxGeometry width="80" relative="1" as="geometry">
            <mxPoint x="1926" y="588" as="sourcePoint" />
            <mxPoint x="2000" y="590" as="targetPoint" />
          </mxGeometry>
        </mxCell>
        <mxCell id="afeIu968NGdjf6M2ejIc-34" value="200 ok PromoCode" style="html=1;verticalAlign=bottom;endArrow=open;dashed=1;endSize=8;curved=0;rounded=0;" edge="1" parent="1" source="afeIu968NGdjf6M2ejIc-29">
          <mxGeometry relative="1" as="geometry">
            <mxPoint x="2040" y="660" as="sourcePoint" />
            <mxPoint x="1925" y="660" as="targetPoint" />
          </mxGeometry>
        </mxCell>
        <mxCell id="afeIu968NGdjf6M2ejIc-36" value="validate promoCode" style="html=1;align=left;spacingLeft=2;endArrow=block;rounded=0;edgeStyle=orthogonalEdgeStyle;curved=0;rounded=0;" edge="1" parent="1">
          <mxGeometry relative="1" as="geometry">
            <mxPoint x="2090" y="590" as="sourcePoint" />
            <Array as="points">
              <mxPoint x="2120" y="620" />
            </Array>
            <mxPoint x="2095" y="620.037037037037" as="targetPoint" />
          </mxGeometry>
        </mxCell>
        <mxCell id="afeIu968NGdjf6M2ejIc-37" value="alt" style="shape=umlFrame;whiteSpace=wrap;html=1;pointerEvents=0;width=40;height=30;" vertex="1" parent="1">
          <mxGeometry x="1540" y="630" width="670" height="170" as="geometry" />
        </mxCell>
        <mxCell id="afeIu968NGdjf6M2ejIc-38" value="valid promoCode" style="text;html=1;align=center;verticalAlign=middle;resizable=0;points=[];autosize=1;strokeColor=none;fillColor=none;" vertex="1" parent="1">
          <mxGeometry x="2090" y="700" width="110" height="30" as="geometry" />
        </mxCell>
        <mxCell id="afeIu968NGdjf6M2ejIc-39" value="apply&amp;nbsp;&lt;div&gt;promocode&lt;/div&gt;" style="html=1;align=left;spacingLeft=2;endArrow=block;rounded=0;edgeStyle=orthogonalEdgeStyle;curved=0;rounded=0;" edge="1" parent="1">
          <mxGeometry relative="1" as="geometry">
            <mxPoint x="1930" y="680" as="sourcePoint" />
            <Array as="points">
              <mxPoint x="1960" y="710" />
            </Array>
            <mxPoint x="1935" y="710.037037037037" as="targetPoint" />
          </mxGeometry>
        </mxCell>
        <mxCell id="afeIu968NGdjf6M2ejIc-40" value="" style="endArrow=none;dashed=1;html=1;rounded=0;exitX=0;exitY=0.651;exitDx=0;exitDy=0;exitPerimeter=0;entryX=1;entryY=0.654;entryDx=0;entryDy=0;entryPerimeter=0;" edge="1" parent="1" source="afeIu968NGdjf6M2ejIc-37" target="afeIu968NGdjf6M2ejIc-37">
          <mxGeometry width="50" height="50" relative="1" as="geometry">
            <mxPoint x="1960" y="770" as="sourcePoint" />
            <mxPoint x="2210" y="720" as="targetPoint" />
          </mxGeometry>
        </mxCell>
        <mxCell id="afeIu968NGdjf6M2ejIc-41" value="invalid promocode" style="text;html=1;align=center;verticalAlign=middle;resizable=0;points=[];autosize=1;strokeColor=none;fillColor=none;" vertex="1" parent="1">
          <mxGeometry x="2085" y="750" width="120" height="30" as="geometry" />
        </mxCell>
        <mxCell id="afeIu968NGdjf6M2ejIc-42" value="40x Error" style="html=1;verticalAlign=bottom;endArrow=open;dashed=1;endSize=8;curved=0;rounded=0;" edge="1" parent="1" source="afeIu968NGdjf6M2ejIc-29">
          <mxGeometry relative="1" as="geometry">
            <mxPoint x="2040" y="770" as="sourcePoint" />
            <mxPoint x="1925" y="770" as="targetPoint" />
          </mxGeometry>
        </mxCell>
        <mxCell id="afeIu968NGdjf6M2ejIc-44" value="display error mesasge" style="html=1;verticalAlign=bottom;endArrow=block;endSize=8;curved=0;rounded=0;endFill=1;" edge="1" parent="1" target="afeIu968NGdjf6M2ejIc-16">
          <mxGeometry relative="1" as="geometry">
            <mxPoint x="1915" y="780" as="sourcePoint" />
            <mxPoint x="1800" y="780" as="targetPoint" />
          </mxGeometry>
        </mxCell>
        <mxCell id="afeIu968NGdjf6M2ejIc-45" value="user has promocode" style="text;html=1;align=center;verticalAlign=middle;resizable=0;points=[];autosize=1;strokeColor=none;fillColor=none;" vertex="1" parent="1">
          <mxGeometry x="1460" y="590" width="130" height="30" as="geometry" />
        </mxCell>
        <mxCell id="afeIu968NGdjf6M2ejIc-47" value="Payment Gateway" style="shape=umlLifeline;whiteSpace=wrap;html=1;container=1;dropTarget=0;collapsible=0;recursiveResize=0;outlineConnect=0;portConstraint=eastwest;newEdgeStyle={&quot;curved&quot;:0,&quot;rounded&quot;:0};targetShapes=umlLifeline;participant=label;points=[[0,0,0,0,5],[0,1,0,0,-5],[1,0,0,0,5],[1,1,0,0,-5]];perimeter=rectanglePerimeter;" vertex="1" parent="1">
          <mxGeometry x="2240" y="400" width="100" height="870" as="geometry" />
        </mxCell>
        <mxCell id="afeIu968NGdjf6M2ejIc-48" value="" style="html=1;points=[[0,0,0,0,5],[0,1,0,0,-5],[1,0,0,0,5],[1,1,0,0,-5]];perimeter=orthogonalPerimeter;outlineConnect=0;targetShapes=umlLifeline;portConstraint=eastwest;newEdgeStyle={&quot;curved&quot;:0,&quot;rounded&quot;:0};" vertex="1" parent="afeIu968NGdjf6M2ejIc-47">
          <mxGeometry x="45" y="790" width="10" height="60" as="geometry" />
        </mxCell>
        <mxCell id="afeIu968NGdjf6M2ejIc-49" value="clicks pay" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;curved=0;" edge="1" parent="1">
          <mxGeometry relative="1" as="geometry">
            <mxPoint x="1600" y="830" as="sourcePoint" />
            <mxPoint x="1915" y="830" as="targetPoint" />
            <Array as="points">
              <mxPoint x="1680" y="830" />
              <mxPoint x="1680" y="830" />
            </Array>
          </mxGeometry>
        </mxCell>
        <mxCell id="afeIu968NGdjf6M2ejIc-51" value="redirect(POST /transactions)" style="html=1;verticalAlign=bottom;endArrow=block;endSize=8;curved=0;rounded=0;endFill=1;" edge="1" parent="1">
          <mxGeometry relative="1" as="geometry">
            <mxPoint x="1915" y="860" as="sourcePoint" />
            <mxPoint x="1600" y="860" as="targetPoint" />
          </mxGeometry>
        </mxCell>
        <mxCell id="afeIu968NGdjf6M2ejIc-52" value="&lt;div style=&quot;font-size: 12px; text-align: left; background-color: rgb(251, 251, 251);&quot;&gt;POST /transactions(user, promoCode, service, subscription)&lt;/div&gt;" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;curved=0;" edge="1" parent="1" target="afeIu968NGdjf6M2ejIc-29">
          <mxGeometry relative="1" as="geometry">
            <mxPoint x="1600" y="910" as="sourcePoint" />
            <mxPoint x="1915" y="910" as="targetPoint" />
            <Array as="points">
              <mxPoint x="1600" y="911" />
            </Array>
          </mxGeometry>
        </mxCell>
        <mxCell id="afeIu968NGdjf6M2ejIc-53" value="validate promoCode&lt;div&gt;if there&lt;/div&gt;" style="html=1;align=left;spacingLeft=2;endArrow=block;rounded=0;edgeStyle=orthogonalEdgeStyle;curved=0;rounded=0;" edge="1" parent="1">
          <mxGeometry relative="1" as="geometry">
            <mxPoint x="2090" y="920" as="sourcePoint" />
            <Array as="points">
              <mxPoint x="2120" y="950" />
            </Array>
            <mxPoint x="2095" y="950.037037037037" as="targetPoint" />
          </mxGeometry>
        </mxCell>
        <mxCell id="afeIu968NGdjf6M2ejIc-54" value="validate service&amp;nbsp;&lt;div&gt;and subscription&lt;/div&gt;&lt;div&gt;params&lt;/div&gt;" style="html=1;align=left;spacingLeft=2;endArrow=block;rounded=0;edgeStyle=orthogonalEdgeStyle;curved=0;rounded=0;" edge="1" parent="1">
          <mxGeometry relative="1" as="geometry">
            <mxPoint x="2090" y="970" as="sourcePoint" />
            <Array as="points">
              <mxPoint x="2120" y="970" />
              <mxPoint x="2120" y="1020" />
              <mxPoint x="2095" y="1020" />
            </Array>
            <mxPoint x="2086" y="1020" as="targetPoint" />
          </mxGeometry>
        </mxCell>
        <mxCell id="afeIu968NGdjf6M2ejIc-55" value="create&amp;nbsp;&lt;div&gt;transaction&lt;/div&gt;" style="html=1;align=left;spacingLeft=2;endArrow=block;rounded=0;edgeStyle=orthogonalEdgeStyle;curved=0;rounded=0;" edge="1" parent="1">
          <mxGeometry relative="1" as="geometry">
            <mxPoint x="2090" y="1040" as="sourcePoint" />
            <Array as="points">
              <mxPoint x="2120" y="1040" />
              <mxPoint x="2120" y="1080" />
              <mxPoint x="2086" y="1080" />
            </Array>
            <mxPoint x="2084" y="1081" as="targetPoint" />
          </mxGeometry>
        </mxCell>
        <mxCell id="afeIu968NGdjf6M2ejIc-56" value="Generate&amp;nbsp;&lt;span style=&quot;background-color: light-dark(#ffffff, var(--ge-dark-color, #121212)); color: light-dark(rgb(0, 0, 0), rgb(255, 255, 255));&quot;&gt;kasheir&amp;nbsp;&lt;/span&gt;&lt;span style=&quot;background-color: light-dark(#ffffff, var(--ge-dark-color, #121212)); color: light-dark(rgb(0, 0, 0), rgb(255, 255, 255));&quot;&gt;hash&lt;/span&gt;" style="html=1;align=left;spacingLeft=2;endArrow=block;rounded=0;edgeStyle=orthogonalEdgeStyle;curved=0;rounded=0;" edge="1" parent="1">
          <mxGeometry relative="1" as="geometry">
            <mxPoint x="2085" y="1120" as="sourcePoint" />
            <Array as="points">
              <mxPoint x="2115" y="1150" />
            </Array>
            <mxPoint x="2090" y="1150.037037037037" as="targetPoint" />
          </mxGeometry>
        </mxCell>
        <mxCell id="afeIu968NGdjf6M2ejIc-58" value="opt" style="shape=umlFrame;whiteSpace=wrap;html=1;pointerEvents=0;width=40;height=30;" vertex="1" parent="1">
          <mxGeometry x="1530" y="1100" width="800" height="250" as="geometry" />
        </mxCell>
        <mxCell id="afeIu968NGdjf6M2ejIc-59" value="final price &amp;gt; 0" style="text;html=1;align=center;verticalAlign=middle;resizable=0;points=[];autosize=1;strokeColor=none;fillColor=none;" vertex="1" parent="1">
          <mxGeometry x="1790" y="1110" width="100" height="30" as="geometry" />
        </mxCell>
        <mxCell id="afeIu968NGdjf6M2ejIc-61" value="redirect to kasheir checkout" style="html=1;verticalAlign=bottom;endArrow=block;endSize=8;curved=0;rounded=0;endFill=1;" edge="1" parent="1">
          <mxGeometry relative="1" as="geometry">
            <mxPoint x="2075" y="1180" as="sourcePoint" />
            <mxPoint x="1600" y="1180" as="targetPoint" />
          </mxGeometry>
        </mxCell>
        <mxCell id="afeIu968NGdjf6M2ejIc-62" value="&lt;div style=&quot;font-size: 12px; text-align: left; background-color: rgb(251, 251, 251);&quot;&gt;goto the final checkout&amp;nbsp;&lt;/div&gt;" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;curved=0;" edge="1" parent="1" target="afeIu968NGdjf6M2ejIc-48">
          <mxGeometry relative="1" as="geometry">
            <mxPoint x="1600" y="1210" as="sourcePoint" />
            <mxPoint x="2280" y="1212" as="targetPoint" />
            <Array as="points">
              <mxPoint x="1600" y="1211" />
            </Array>
          </mxGeometry>
        </mxCell>
        <mxCell id="afeIu968NGdjf6M2ejIc-63" value="redirect(POST /transactions/complete)" style="html=1;verticalAlign=bottom;endArrow=block;endSize=8;curved=0;rounded=0;endFill=1;" edge="1" parent="1">
          <mxGeometry relative="1" as="geometry">
            <mxPoint x="2284.6" y="1240" as="sourcePoint" />
            <mxPoint x="1605" y="1240" as="targetPoint" />
          </mxGeometry>
        </mxCell>
        <mxCell id="afeIu968NGdjf6M2ejIc-64" value="POST /transactions/complete" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;curved=0;" edge="1" parent="1">
          <mxGeometry relative="1" as="geometry">
            <mxPoint x="1600" y="1270" as="sourcePoint" />
            <mxPoint x="2075" y="1271" as="targetPoint" />
            <Array as="points">
              <mxPoint x="1600" y="1271" />
            </Array>
          </mxGeometry>
        </mxCell>
        <mxCell id="afeIu968NGdjf6M2ejIc-66" value="validate signature&lt;div&gt;and params&lt;/div&gt;" style="html=1;align=left;spacingLeft=2;endArrow=block;rounded=0;edgeStyle=orthogonalEdgeStyle;curved=0;rounded=0;" edge="1" parent="1">
          <mxGeometry relative="1" as="geometry">
            <mxPoint x="2091" y="1289" as="sourcePoint" />
            <Array as="points">
              <mxPoint x="2121" y="1289" />
              <mxPoint x="2121" y="1329" />
              <mxPoint x="2087" y="1329" />
            </Array>
            <mxPoint x="2085" y="1330" as="targetPoint" />
          </mxGeometry>
        </mxCell>
        <mxCell id="afeIu968NGdjf6M2ejIc-67" value="update transaction" style="html=1;align=left;spacingLeft=2;endArrow=block;rounded=0;edgeStyle=orthogonalEdgeStyle;curved=0;rounded=0;" edge="1" parent="1">
          <mxGeometry relative="1" as="geometry">
            <mxPoint x="2091" y="1370" as="sourcePoint" />
            <Array as="points">
              <mxPoint x="2121" y="1370" />
              <mxPoint x="2121" y="1410" />
              <mxPoint x="2087" y="1410" />
            </Array>
            <mxPoint x="2085" y="1411" as="targetPoint" />
          </mxGeometry>
        </mxCell>
        <mxCell id="afeIu968NGdjf6M2ejIc-68" value="alt" style="shape=umlFrame;whiteSpace=wrap;html=1;pointerEvents=0;width=40;height=30;" vertex="1" parent="1">
          <mxGeometry x="1540" y="1420" width="670" height="170" as="geometry" />
        </mxCell>
        <mxCell id="afeIu968NGdjf6M2ejIc-69" value="" style="endArrow=none;dashed=1;html=1;rounded=0;exitX=0;exitY=0.651;exitDx=0;exitDy=0;exitPerimeter=0;entryX=1;entryY=0.654;entryDx=0;entryDy=0;entryPerimeter=0;" edge="1" source="afeIu968NGdjf6M2ejIc-68" target="afeIu968NGdjf6M2ejIc-68" parent="1">
          <mxGeometry width="50" height="50" relative="1" as="geometry">
            <mxPoint x="1960" y="1500" as="sourcePoint" />
            <mxPoint x="2210" y="1450" as="targetPoint" />
          </mxGeometry>
        </mxCell>
        <mxCell id="afeIu968NGdjf6M2ejIc-70" value="transaction is success" style="text;html=1;align=center;verticalAlign=middle;resizable=0;points=[];autosize=1;strokeColor=none;fillColor=none;" vertex="1" parent="1">
          <mxGeometry x="1760" y="1420" width="140" height="30" as="geometry" />
        </mxCell>
        <mxCell id="afeIu968NGdjf6M2ejIc-71" value="create a new&lt;div&gt;subscription&lt;/div&gt;" style="html=1;align=left;spacingLeft=2;endArrow=block;rounded=0;edgeStyle=orthogonalEdgeStyle;curved=0;rounded=0;" edge="1" parent="1">
          <mxGeometry relative="1" as="geometry">
            <mxPoint x="2091" y="1450" as="sourcePoint" />
            <Array as="points">
              <mxPoint x="2121" y="1450" />
              <mxPoint x="2121" y="1490" />
              <mxPoint x="2087" y="1490" />
            </Array>
            <mxPoint x="2085" y="1491" as="targetPoint" />
          </mxGeometry>
        </mxCell>
        <mxCell id="afeIu968NGdjf6M2ejIc-72" value="redirect(service.redirectUrl)" style="html=1;verticalAlign=bottom;endArrow=block;endSize=8;curved=0;rounded=0;endFill=1;" edge="1" parent="1">
          <mxGeometry relative="1" as="geometry">
            <mxPoint x="2075" y="1510" as="sourcePoint" />
            <mxPoint x="1600" y="1510" as="targetPoint" />
          </mxGeometry>
        </mxCell>
        <mxCell id="afeIu968NGdjf6M2ejIc-73" value="transaction is failure" style="text;html=1;align=center;verticalAlign=middle;resizable=0;points=[];autosize=1;strokeColor=none;fillColor=none;" vertex="1" parent="1">
          <mxGeometry x="1735" y="1530" width="130" height="30" as="geometry" />
        </mxCell>
        <mxCell id="afeIu968NGdjf6M2ejIc-74" value="redirect(service.failureRedirectUrl)" style="html=1;verticalAlign=bottom;endArrow=block;endSize=8;curved=0;rounded=0;endFill=1;" edge="1" parent="1">
          <mxGeometry relative="1" as="geometry">
            <mxPoint x="2075" y="1580" as="sourcePoint" />
            <mxPoint x="1600" y="1580" as="targetPoint" />
          </mxGeometry>
        </mxCell>
      </root>
    </mxGraphModel>
  </diagram>
</mxfile>
